{"remainingRequest":"D:\\webLearn\\Vue\\黑马头条\\后台\\publish-admin-test\\node_modules\\babel-loader\\lib\\index.js!D:\\webLearn\\Vue\\黑马头条\\后台\\publish-admin-test\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\webLearn\\Vue\\黑马头条\\后台\\publish-admin-test\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\webLearn\\Vue\\黑马头条\\后台\\publish-admin-test\\src\\views\\publish\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\webLearn\\Vue\\黑马头条\\后台\\publish-admin-test\\src\\views\\publish\\index.vue","mtime":1607177356888},{"path":"D:\\webLearn\\Vue\\黑马头条\\后台\\publish-admin-test\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\webLearn\\Vue\\黑马头条\\后台\\publish-admin-test\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\webLearn\\Vue\\黑马头条\\后台\\publish-admin-test\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\webLearn\\Vue\\黑马头条\\后台\\publish-admin-test\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC50by1zdHJpbmciOwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwppbXBvcnQgeyBnZXRBcnRpY2xlQ2hhbm5lbHMsIGFkZEFydGljbGUsIHVwZGF0ZUFydGljbGUsIGdldEFydGljbGUgfSBmcm9tICJAL2FwaS9hcnRpY2xlIjsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdQdWJsaXNoSW5kZXgnLAogIHByb3BzOiB7fSwKICBjb21wb25lbnRzOiB7fSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgY2hhbm5lbHM6IFtdLAogICAgICBhcnRpY2xlOiB7CiAgICAgICAgdGl0bGU6ICcnLAogICAgICAgIC8vIOaWh+eroOagh+mimAogICAgICAgIGNvbnRlbnQ6ICcnLAogICAgICAgIC8vIOaWh+eroOWGheWuuQogICAgICAgIGNvdmVyOiB7CiAgICAgICAgICAvLyDmlofnq6DlsIHpnaIKICAgICAgICAgIHR5cGU6IDAsCiAgICAgICAgICAvLyDlsIHpnaLnsbvlnosgLTE66Ieq5Yqo77yMMC3ml6Dlm77vvIwxLTHlvKDvvIwzLTPlvKAKICAgICAgICAgIGltYWdlczogW10gLy8g5bCB6Z2i5Zu+54mH55qE5Zyw5Z2ACgogICAgICAgIH0sCiAgICAgICAgY2hhbm5lbF9pZDogbnVsbAogICAgICB9LAogICAgICBhcnRpY2xlX2lkOiBudWxsCiAgICB9OwogIH0sCiAgY29tcHV0ZWQ6IHt9LAogIGNyZWF0ZWQ6IGZ1bmN0aW9uIGNyZWF0ZWQoKSB7CiAgICB0aGlzLmxvYWRDaGFubmVscygpOyAvLyDnlLHkuo7miJHku6zorqnlj5HluIPlkozkv67mlLnkvb/nlKjnmoTmmK8g5ZCM5LiA5Liq57uE5Lu2CiAgICAvLyDmiYDku6Xov5nph4zopoHliKTmlq0KICAgIC8vIOWmguaenOi3r+eUseWPguaVsOS4reaciSBpZCAg5YiZ6K+35rGC5bGV56S65paH56ug5YaF5a65CgogICAgaWYgKHRoaXMuJHJvdXRlLnF1ZXJ5LmlkKSB7CiAgICAgIHRoaXMubG9hZEFydGljbGUoKTsKICAgIH0KICB9LAogIG1vdW50ZWQ6IGZ1bmN0aW9uIG1vdW50ZWQoKSB7fSwKICB3YXRjaDoge30sCiAgbWV0aG9kczogewogICAgb25QdWJsaXNoOiBmdW5jdGlvbiBvblB1Ymxpc2goKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICB2YXIgZHJhZnQgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IGZhbHNlOwoKICAgICAgaWYgKHRoaXMuYXJ0aWNsZV9pZCkgewogICAgICAgIHVwZGF0ZUFydGljbGUodGhpcy5hcnRpY2xlX2lkLCB0aGlzLmFydGljbGUsIGRyYWZ0KS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgIGNvbnNvbGUubG9nKHJlcyk7CgogICAgICAgICAgX3RoaXMuJG1lc3NhZ2UoewogICAgICAgICAgICBtZXNzYWdlOiAiIi5jb25jYXQoZHJhZnQgPyAn5a2Y5YWl6I2J56i/JyA6ICflj5HluIMnLCAiXHU2MjEwXHU1MjlGIiksCiAgICAgICAgICAgIHR5cGU6ICdzdWNjZXNzJwogICAgICAgICAgfSk7IC8vIOi3s+i9rOWIsOWGheWuueeuoeeQhumhtemdogoKCiAgICAgICAgICBfdGhpcy4kcm91dGVyLnB1c2goJy9hcnRpY2xlJyk7CiAgICAgICAgfSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgLy8g5om+5Yiw5pWw5o2u5o6l5Y+jCiAgICAgICAgYWRkQXJ0aWNsZSh0aGlzLmFydGljbGUsIGRyYWZ0KS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgIGNvbnNvbGUubG9nKHJlcyk7CgogICAgICAgICAgX3RoaXMuJG1lc3NhZ2UoewogICAgICAgICAgICBtZXNzYWdlOiAn5Y+R5biD5oiQ5YqfJywKICAgICAgICAgICAgdHlwZTogJ3N1Y2Nlc3MnCiAgICAgICAgICB9KTsKICAgICAgICB9KTsKICAgICAgfQogICAgfSwKICAgIGxvYWRDaGFubmVsczogZnVuY3Rpb24gbG9hZENoYW5uZWxzKCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIGdldEFydGljbGVDaGFubmVscygpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgIF90aGlzMi5jaGFubmVscyA9IHJlcy5kYXRhLmRhdGEuY2hhbm5lbHM7CiAgICAgIH0pOwogICAgfSwKICAgIGxvYWRBcnRpY2xlOiBmdW5jdGlvbiBsb2FkQXJ0aWNsZSgpIHsKICAgICAgdmFyIF90aGlzMyA9IHRoaXM7CgogICAgICAvLyDkv67mlLnmlofnq6Ag5Yqg6L295paH56ug5YaF5a65CiAgICAgIHRoaXMuYXJ0aWNsZV9pZCA9IHRoaXMuJHJvdXRlLnF1ZXJ5LmlkLnRvU3RyaW5nKCk7CiAgICAgIGdldEFydGljbGUodGhpcy5hcnRpY2xlX2lkKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICBfdGhpczMuYXJ0aWNsZSA9IHJlcy5kYXRhLmRhdGE7CiAgICAgIH0pOwogICAgfQogIH0sCiAgZmlsdGVyczogewogICAgZm5OYW1lOiBmdW5jdGlvbiBmbk5hbWUodmFsdWUpIHsKICAgICAgcmV0dXJuIHZhbHVlOwogICAgfQogIH0KfTs="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8CA,SAAA,kBAAA,EAAA,UAAA,EAAA,aAAA,EAAA,UAAA,QAAA,eAAA;AAEA,eAAA;AACA,EAAA,IAAA,EAAA,cADA;AAEA,EAAA,KAAA,EAAA,EAFA;AAGA,EAAA,UAAA,EAAA,EAHA;AAKA,EAAA,IALA,kBAKA;AACA,WAAA;AACA,MAAA,QAAA,EAAA,EADA;AAEA,MAAA,OAAA,EAAA;AACA,QAAA,KAAA,EAAA,EADA;AACA;AACA,QAAA,OAAA,EAAA,EAFA;AAEA;AACA,QAAA,KAAA,EAAA;AAAA;AACA,UAAA,IAAA,EAAA,CADA;AACA;AACA,UAAA,MAAA,EAAA,EAFA,CAEA;;AAFA,SAHA;AAOA,QAAA,UAAA,EAAA;AAPA,OAFA;AAWA,MAAA,UAAA,EAAA;AAXA,KAAA;AAaA,GAnBA;AAoBA,EAAA,QAAA,EAAA,EApBA;AAsBA,EAAA,OAtBA,qBAsBA;AACA,SAAA,YAAA,GADA,CAGA;AACA;AACA;;AACA,QAAA,KAAA,MAAA,CAAA,KAAA,CAAA,EAAA,EAAA;AACA,WAAA,WAAA;AACA;AACA,GA/BA;AAgCA,EAAA,OAhCA,qBAgCA,CAAA,CAhCA;AAiCA,EAAA,KAAA,EAAA,EAjCA;AAmCA,EAAA,OAAA,EAAA;AACA,IAAA,SADA,uBACA;AAAA;;AAAA,UAAA,KAAA,uEAAA,KAAA;;AACA,UAAA,KAAA,UAAA,EAAA;AACA,QAAA,aAAA,CAAA,KAAA,UAAA,EAAA,KAAA,OAAA,EAAA,KAAA,CAAA,CAAA,IAAA,CAAA,UAAA,GAAA,EAAA;AACA,UAAA,OAAA,CAAA,GAAA,CAAA,GAAA;;AACA,UAAA,KAAA,CAAA,QAAA,CAAA;AACA,YAAA,OAAA,YAAA,KAAA,GAAA,MAAA,GAAA,IAAA,iBADA;AAEA,YAAA,IAAA,EAAA;AAFA,WAAA,EAFA,CAMA;;;AACA,UAAA,KAAA,CAAA,OAAA,CAAA,IAAA,CAAA,UAAA;AACA,SARA;AASA,OAVA,MAUA;AACA;AACA,QAAA,UAAA,CAAA,KAAA,OAAA,EAAA,KAAA,CAAA,CAAA,IAAA,CAAA,UAAA,GAAA,EAAA;AACA,UAAA,OAAA,CAAA,GAAA,CAAA,GAAA;;AACA,UAAA,KAAA,CAAA,QAAA,CAAA;AACA,YAAA,OAAA,EAAA,MADA;AAEA,YAAA,IAAA,EAAA;AAFA,WAAA;AAIA,SANA;AAOA;AACA,KAtBA;AAuBA,IAAA,YAvBA,0BAuBA;AAAA;;AACA,MAAA,kBAAA,GAAA,IAAA,CAAA,UAAA,GAAA,EAAA;AACA,QAAA,MAAA,CAAA,QAAA,GAAA,GAAA,CAAA,IAAA,CAAA,IAAA,CAAA,QAAA;AACA,OAFA;AAGA,KA3BA;AA4BA,IAAA,WA5BA,yBA4BA;AAAA;;AACA;AACA,WAAA,UAAA,GAAA,KAAA,MAAA,CAAA,KAAA,CAAA,EAAA,CAAA,QAAA,EAAA;AACA,MAAA,UAAA,CAAA,KAAA,UAAA,CAAA,CAAA,IAAA,CAAA,UAAA,GAAA,EAAA;AACA,QAAA,MAAA,CAAA,OAAA,GAAA,GAAA,CAAA,IAAA,CAAA,IAAA;AACA,OAFA;AAGA;AAlCA,GAnCA;AAuEA,EAAA,OAAA,EAAA;AACA,IAAA,MAAA,EAAA,gBAAA,KAAA,EAAA;AACA,aAAA,KAAA;AACA;AAHA;AAvEA,CAAA","sourcesContent":["<template>\r\n  <div class=\"publish-container\">\r\n    <el-card class=\"box-card\">\r\n      <div slot=\"header\" class=\"clearfix\">\r\n        <div slot=\"header\" class=\"clearfix\">\r\n          <el-breadcrumb separator-class=\"el-icon-arrow-right\">\r\n            <el-breadcrumb-item :to=\"{ path: '/' }\">首页</el-breadcrumb-item>\r\n            <el-breadcrumb-item>发布文章</el-breadcrumb-item>\r\n          </el-breadcrumb>\r\n        </div>\r\n      </div>\r\n      <el-form ref=\"form\" :model=\"article\" label-width=\"40px\">\r\n        <el-form-item label=\"标题\">\r\n          <el-input v-model=\"article.title\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"内容\">\r\n          <el-input type=\"textarea\" v-model=\"article.content\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"封面\">\r\n          <el-radio-group v-model=\"article.cover.type\">\r\n            <el-radio :label=\"1\">单图</el-radio>\r\n            <el-radio :label=\"3\">三图</el-radio>\r\n            <el-radio :label=\"0\">无图</el-radio>\r\n            <el-radio :label=\"-1\">自动</el-radio>\r\n          </el-radio-group>\r\n        </el-form-item>\r\n        <el-form-item label=\"频道\">\r\n          <el-select v-model=\"article.channel_id\" placeholder=\"请选择频道\">\r\n            <el-option\r\n              :label=\"channel.name\"\r\n              :value=\"channel.id\"\r\n              v-for=\"(channel, index) in channels\"\r\n              :key=\"index\"\r\n            ></el-option>\r\n          </el-select>\r\n        </el-form-item>\r\n        <el-form-item>\r\n          <el-button type=\"primary\" @click=\"onPublish(false)\">发表</el-button>\r\n          <el-button @click=\"onPublish(true)\">存入草稿</el-button>\r\n        </el-form-item>\r\n      </el-form>\r\n    </el-card>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  import { getArticleChannels, addArticle, updateArticle, getArticle } from \"@/api/article\";\r\n\r\n  export default {\r\n  name: 'PublishIndex',\r\n  props: {},\r\n  components: {\r\n  },\r\n  data () {\r\n    return {\r\n      channels: [],\r\n      article: {\r\n        title: '', // 文章标题\r\n        content : '', // 文章内容\r\n        cover : { // 文章封面\r\n          type : 0, // 封面类型 -1:自动，0-无图，1-1张，3-3张\r\n          images: [] // 封面图片的地址\r\n        },\r\n        channel_id: null\r\n      },\r\n      article_id: null\r\n    }\r\n  },\r\n  computed: {\r\n  },\r\n  created() {\r\n    this.loadChannels()\r\n\r\n    // 由于我们让发布和修改使用的是 同一个组件\r\n    // 所以这里要判断\r\n    // 如果路由参数中有 id  则请求展示文章内容\r\n    if (this.$route.query.id) {\r\n      this.loadArticle()\r\n    }\r\n  },\r\n  mounted() {},\r\n  watch: {\r\n  },\r\n  methods: {\r\n    onPublish(draft = false) {\r\n      if (this.article_id){\r\n        updateArticle(this.article_id, this.article, draft).then(res => {\r\n          console.log(res)\r\n          this.$message({\r\n            message: `${draft ? '存入草稿' : '发布'}成功`,\r\n            type: 'success'\r\n          })\r\n          // 跳转到内容管理页面\r\n          this.$router.push('/article')\r\n        })\r\n      }else {\r\n        // 找到数据接口\r\n        addArticle(this.article, draft).then(res => {\r\n          console.log(res)\r\n          this.$message({\r\n            message: '发布成功',\r\n            type: 'success'\r\n          })\r\n        })\r\n      }\r\n    },\r\n    loadChannels () {\r\n      getArticleChannels().then(res => {\r\n        this.channels = res.data.data.channels\r\n      })\r\n    },\r\n    loadArticle () {\r\n      // 修改文章 加载文章内容\r\n      this.article_id = this.$route.query.id.toString()\r\n      getArticle(this.article_id).then(res => {\r\n        this.article = res.data.data\r\n      })\r\n    }\r\n  },\r\n  filters: {\r\n    fnName: function (value) {\r\n      return value\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped lang=\"less\">\r\n\r\n</style>\r\n"],"sourceRoot":"src/views/publish"}]}