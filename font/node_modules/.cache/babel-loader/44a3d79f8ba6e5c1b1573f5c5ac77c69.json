{"remainingRequest":"D:\\webLearn\\Vue\\黑马头条\\后台\\publish-admin-test\\node_modules\\thread-loader\\dist\\cjs.js!D:\\webLearn\\Vue\\黑马头条\\后台\\publish-admin-test\\node_modules\\babel-loader\\lib\\index.js!D:\\webLearn\\Vue\\黑马头条\\后台\\publish-admin-test\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\webLearn\\Vue\\黑马头条\\后台\\publish-admin-test\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\webLearn\\Vue\\黑马头条\\后台\\publish-admin-test\\src\\views\\image\\components\\image-list.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\webLearn\\Vue\\黑马头条\\后台\\publish-admin-test\\src\\views\\image\\components\\image-list.vue","mtime":1606908413765},{"path":"D:\\webLearn\\Vue\\黑马头条\\后台\\publish-admin-test\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\webLearn\\Vue\\黑马头条\\后台\\publish-admin-test\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\webLearn\\Vue\\黑马头条\\后台\\publish-admin-test\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\webLearn\\Vue\\黑马头条\\后台\\publish-admin-test\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\webLearn\\Vue\\黑马头条\\后台\\publish-admin-test\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZm9yLWVhY2giOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5udW1iZXIuY29uc3RydWN0b3IiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLmZvci1lYWNoIjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IHsgZ2V0SW1hZ2VzLCBjb2xsZWN0SW1hZ2UsIGRlbGV0ZUltYWdlIH0gZnJvbSAnQC9hcGkvaW1hZ2UnOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ0ltYWdlTGlzdCcsCiAgY29tcG9uZW50czoge30sCiAgLy8g5L2/55So5a+56LGh55qE5pa55byP5a6a5LmJIHByb3DvvIzmm7TkuKXosKjvvIzlip/og73mm7TkuLDlr4zvvIzlvLrng4jlu7rorq7lnKjpobnnm67kuK3kvb/nlKgKICAvLyDlj4LogIPmlofmoaPvvJpodHRwczovL2NuLnZ1ZWpzLm9yZy92Mi9ndWlkZS9jb21wb25lbnRzLXByb3BzLmh0bWwjUHJvcC0lRTklQUElOEMlRTglQUYlODEKICBwcm9wczogewogICAgZm9vOiB7CiAgICAgIHR5cGU6IE51bWJlciwKICAgICAgLy8gcmVxdWlyZWQ6IHRydWUsCiAgICAgIGRlZmF1bHQ6IDEyMwogICAgfSwKICAgIC8vIOaYr+WQpuaYvuekuua3u+WKoOe0oOadkAogICAgaXNTaG93QWRkOiB7CiAgICAgIHR5cGU6IEJvb2xlYW4sCiAgICAgIC8vIOW4g+WwlOWAvAogICAgICBkZWZhdWx0OiB0cnVlIC8vIOm7mOiupOWAvAoKICAgIH0sCiAgICAvLyDmmK/lkKbmmL7npLrlm77niYfkuIvmlrnnmoTmk43kvZzvvIjmlLbol4/lkozliKDpmaTvvIkKICAgIGlzU2hvd0FjdGlvbjogewogICAgICB0eXBlOiBCb29sZWFuLAogICAgICBkZWZhdWx0OiB0cnVlCiAgICB9LAogICAgaXNTaG93U2VsZWN0ZWQ6IHsKICAgICAgdHlwZTogQm9vbGVhbiwKICAgICAgZGVmYXVsdDogZmFsc2UKICAgIH0KICB9LAogIC8vIOS9v+eUqOaVsOe7hOWjsOaYjiBwcm9w77yM5LiN5bu66K6u77yM5LiN5aSf5Lil6LCo77yM6ICM5LiU5Yqf6IO95Lmf5LiN5aSf5by65aSn77yM5LuF6YCC5ZCIIGRlbW8g5ryU56S6CiAgLy8gcHJvcHM6IFsnZHNhZHNhZHNhJ10sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHZhciB1c2VyID0gSlNPTi5wYXJzZSh3aW5kb3cubG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3VzZXInKSk7CiAgICByZXR1cm4gewogICAgICBjb2xsZWN0OiBmYWxzZSwKICAgICAgLy8g6buY6K6k5p+l6K+i5YWo6YOo57Sg5p2Q5YiX6KGoCiAgICAgIGltYWdlczogW10sCiAgICAgIC8vIOWbvueJh+e0oOadkOWIl+ihqAogICAgICBkaWFsb2dVcGxvYWRWaXNpYmxlOiBmYWxzZSwKICAgICAgdXBsb2FkSGVhZGVyczogewogICAgICAgIEF1dGhvcml6YXRpb246ICJCZWFyZXIgIi5jb25jYXQodXNlci50b2tlbikKICAgICAgfSwKICAgICAgdG90YWxDb3VudDogMCwKICAgICAgLy8g5oC75pWw5o2u5p2h5pWwCiAgICAgIHBhZ2VTaXplOiAyMCwKICAgICAgLy8g5q+P6aG15aSn5bCPCiAgICAgIHBhZ2U6IDEsCiAgICAgIC8vIOW9k+WJjemhteeggQogICAgICBzZWxlY3RlZDogbnVsbCAvLyDpgInkuK3nmoTntKLlvJUKCiAgICB9OwogIH0sCiAgY29tcHV0ZWQ6IHt9LAogIHdhdGNoOiB7fSwKICBjcmVhdGVkOiBmdW5jdGlvbiBjcmVhdGVkKCkgewogICAgLy8g6aG16Z2i5Yid5aeL5YyW5Yqg6L2956ysIDEg6aG15pWw5o2uCiAgICB0aGlzLmxvYWRJbWFnZXMoMSk7CiAgfSwKICBtb3VudGVkOiBmdW5jdGlvbiBtb3VudGVkKCkge30sCiAgbWV0aG9kczogewogICAgbG9hZEltYWdlczogZnVuY3Rpb24gbG9hZEltYWdlcygpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHZhciBwYWdlID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiAxOwogICAgICAvLyDph43nva7pq5jkuq7pobXnoIHvvIzpmLLmraLmlbDmja7lkozpobXnoIHkuI3lr7nlupQKICAgICAgdGhpcy5wYWdlID0gcGFnZTsKICAgICAgZ2V0SW1hZ2VzKHsKICAgICAgICBjb2xsZWN0OiB0aGlzLmNvbGxlY3QsCiAgICAgICAgcGFnZTogcGFnZSwKICAgICAgICBwZXJfcGFnZTogdGhpcy5wYWdlU2l6ZQogICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICB2YXIgcmVzdWx0cyA9IHJlcy5kYXRhLmRhdGEucmVzdWx0czsKICAgICAgICByZXN1bHRzLmZvckVhY2goZnVuY3Rpb24gKGltZykgewogICAgICAgICAgLy8gaW1nIOWvueixoeacrOadpeayoeaciSBsb2FkaW5nIOaVsOaNrgogICAgICAgICAgLy8g5oiR5Lus6L+Z6YeM5pS25Yiw55qE5b6A6YeM6Z2i5re75Yqg6K+l5pWw5o2u5piv55So5p2l5o6n5Yi25q+P5Liq5pS26JeP5oyJ6ZKu55qEIGxvYWRpbmcg54q25oCBCiAgICAgICAgICBpbWcubG9hZGluZyA9IGZhbHNlOwogICAgICAgIH0pOwogICAgICAgIF90aGlzLmltYWdlcyA9IHJlc3VsdHM7CiAgICAgICAgX3RoaXMudG90YWxDb3VudCA9IHJlcy5kYXRhLmRhdGEudG90YWxfY291bnQ7CiAgICAgIH0pOwogICAgfSwKICAgIC8vIG9uQ29sbGVjdENoYW5nZSAoKSB7CiAgICAvLyAgIHRoaXMubG9hZEltYWdlcygxKQogICAgLy8gfSwKICAgIG9uVXBsb2FkU3VjY2VzczogZnVuY3Rpb24gb25VcGxvYWRTdWNjZXNzKCkgewogICAgICAvLyDlhbPpl63lr7nor53moYYKICAgICAgdGhpcy5kaWFsb2dVcGxvYWRWaXNpYmxlID0gZmFsc2U7IC8vIOabtOaWsOe0oOadkOWIl+ihqAoKICAgICAgdGhpcy5sb2FkSW1hZ2VzKHRoaXMucGFnZSk7CiAgICAgIHRoaXMuJG1lc3NhZ2UoewogICAgICAgIHR5cGU6ICdzdWNjZXNzJywKICAgICAgICBtZXNzYWdlOiAn5LiK5Lyg5oiQ5YqfJwogICAgICB9KTsKICAgIH0sCiAgICBvblBhZ2VDaGFuZ2U6IGZ1bmN0aW9uIG9uUGFnZUNoYW5nZShwYWdlKSB7CiAgICAgIHRoaXMubG9hZEltYWdlcyhwYWdlKTsKICAgIH0sCiAgICBvbkNvbGxlY3Q6IGZ1bmN0aW9uIG9uQ29sbGVjdChpbWcpIHsKICAgICAgLy8g5bGV56S6IGxvYWRpbmcKICAgICAgaW1nLmxvYWRpbmcgPSB0cnVlOwogICAgICBjb2xsZWN0SW1hZ2UoaW1nLmlkLCAhaW1nLmlzX2NvbGxlY3RlZCkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgLy8g5pu05paw6KeG5Zu+54q25oCBCiAgICAgICAgaW1nLmlzX2NvbGxlY3RlZCA9ICFpbWcuaXNfY29sbGVjdGVkOyAvLyDlhbPpl60gbG9hZGluZwoKICAgICAgICBpbWcubG9hZGluZyA9IGZhbHNlOwogICAgICB9KTsgLy8gaWYgKGltZy5pc19jb2xsZWN0ZWQpIHsKICAgICAgLy8gICAvLyDlt7LmlLbol4/vvIzlj5bmtojmlLbol48KICAgICAgLy8gICBjb2xsZWN0SW1hZ2UoaW1nLmlkLCBmYWxzZSkKICAgICAgLy8gfSBlbHNlIHsKICAgICAgLy8gICAvLyDmsqHmnInmlLbol4/vvIzmt7vliqDmlLbol48KICAgICAgLy8gICBjb2xsZWN0SW1hZ2UoaW1nLmlkLCB0cnVlKQogICAgICAvLyB9CiAgICB9LAogICAgb25EZWxldGU6IGZ1bmN0aW9uIG9uRGVsZXRlKGltZykgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIGltZy5sb2FkaW5nID0gdHJ1ZTsKICAgICAgZGVsZXRlSW1hZ2UoaW1nLmlkKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAvLyDph43mlrDliqDovb3mlbDmja7liJfooagKICAgICAgICBfdGhpczIubG9hZEltYWdlcyhfdGhpczIucGFnZSk7CgogICAgICAgIGltZy5sb2FkaW5nID0gZmFsc2U7CiAgICAgIH0pOwogICAgfQogIH0KfTs="},{"version":3,"sources":["image-list.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgIA,SACA,SADA,EAEA,YAFA,EAGA,WAHA,QAIA,aAJA;AAMA,eAAA;AACA,EAAA,IAAA,EAAA,WADA;AAEA,EAAA,UAAA,EAAA,EAFA;AAGA;AACA;AACA,EAAA,KAAA,EAAA;AACA,IAAA,GAAA,EAAA;AACA,MAAA,IAAA,EAAA,MADA;AAEA;AACA,MAAA,OAAA,EAAA;AAHA,KADA;AAMA;AACA,IAAA,SAAA,EAAA;AACA,MAAA,IAAA,EAAA,OADA;AACA;AACA,MAAA,OAAA,EAAA,IAFA,CAEA;;AAFA,KAPA;AAYA;AACA,IAAA,YAAA,EAAA;AACA,MAAA,IAAA,EAAA,OADA;AAEA,MAAA,OAAA,EAAA;AAFA,KAbA;AAkBA,IAAA,cAAA,EAAA;AACA,MAAA,IAAA,EAAA,OADA;AAEA,MAAA,OAAA,EAAA;AAFA;AAlBA,GALA;AA4BA;AACA;AACA,EAAA,IA9BA,kBA8BA;AACA,QAAA,IAAA,GAAA,IAAA,CAAA,KAAA,CAAA,MAAA,CAAA,YAAA,CAAA,OAAA,CAAA,MAAA,CAAA,CAAA;AACA,WAAA;AACA,MAAA,OAAA,EAAA,KADA;AACA;AACA,MAAA,MAAA,EAAA,EAFA;AAEA;AACA,MAAA,mBAAA,EAAA,KAHA;AAIA,MAAA,aAAA,EAAA;AACA,QAAA,aAAA,mBAAA,IAAA,CAAA,KAAA;AADA,OAJA;AAOA,MAAA,UAAA,EAAA,CAPA;AAOA;AACA,MAAA,QAAA,EAAA,EARA;AAQA;AACA,MAAA,IAAA,EAAA,CATA;AASA;AACA,MAAA,QAAA,EAAA,IAVA,CAUA;;AAVA,KAAA;AAYA,GA5CA;AA6CA,EAAA,QAAA,EAAA,EA7CA;AA8CA,EAAA,KAAA,EAAA,EA9CA;AA+CA,EAAA,OA/CA,qBA+CA;AACA;AACA,SAAA,UAAA,CAAA,CAAA;AACA,GAlDA;AAmDA,EAAA,OAnDA,qBAmDA,CAAA,CAnDA;AAoDA,EAAA,OAAA,EAAA;AACA,IAAA,UADA,wBACA;AAAA;;AAAA,UAAA,IAAA,uEAAA,CAAA;AACA;AACA,WAAA,IAAA,GAAA,IAAA;AACA,MAAA,SAAA,CAAA;AACA,QAAA,OAAA,EAAA,KAAA,OADA;AAEA,QAAA,IAAA,EAAA,IAFA;AAGA,QAAA,QAAA,EAAA,KAAA;AAHA,OAAA,CAAA,CAIA,IAJA,CAIA,UAAA,GAAA,EAAA;AACA,YAAA,OAAA,GAAA,GAAA,CAAA,IAAA,CAAA,IAAA,CAAA,OAAA;AACA,QAAA,OAAA,CAAA,OAAA,CAAA,UAAA,GAAA,EAAA;AACA;AACA;AACA,UAAA,GAAA,CAAA,OAAA,GAAA,KAAA;AACA,SAJA;AAKA,QAAA,KAAA,CAAA,MAAA,GAAA,OAAA;AACA,QAAA,KAAA,CAAA,UAAA,GAAA,GAAA,CAAA,IAAA,CAAA,IAAA,CAAA,WAAA;AACA,OAbA;AAcA,KAlBA;AAoBA;AACA;AACA;AAEA,IAAA,eAxBA,6BAwBA;AACA;AACA,WAAA,mBAAA,GAAA,KAAA,CAFA,CAIA;;AACA,WAAA,UAAA,CAAA,KAAA,IAAA;AAEA,WAAA,QAAA,CAAA;AACA,QAAA,IAAA,EAAA,SADA;AAEA,QAAA,OAAA,EAAA;AAFA,OAAA;AAIA,KAnCA;AAqCA,IAAA,YArCA,wBAqCA,IArCA,EAqCA;AACA,WAAA,UAAA,CAAA,IAAA;AACA,KAvCA;AAyCA,IAAA,SAzCA,qBAyCA,GAzCA,EAyCA;AACA;AACA,MAAA,GAAA,CAAA,OAAA,GAAA,IAAA;AACA,MAAA,YAAA,CAAA,GAAA,CAAA,EAAA,EAAA,CAAA,GAAA,CAAA,YAAA,CAAA,CAAA,IAAA,CAAA,UAAA,GAAA,EAAA;AACA;AACA,QAAA,GAAA,CAAA,YAAA,GAAA,CAAA,GAAA,CAAA,YAAA,CAFA,CAGA;;AACA,QAAA,GAAA,CAAA,OAAA,GAAA,KAAA;AACA,OALA,EAHA,CASA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAzDA;AA2DA,IAAA,QA3DA,oBA2DA,GA3DA,EA2DA;AAAA;;AACA,MAAA,GAAA,CAAA,OAAA,GAAA,IAAA;AACA,MAAA,WAAA,CAAA,GAAA,CAAA,EAAA,CAAA,CAAA,IAAA,CAAA,UAAA,GAAA,EAAA;AACA;AACA,QAAA,MAAA,CAAA,UAAA,CAAA,MAAA,CAAA,IAAA;;AACA,QAAA,GAAA,CAAA,OAAA,GAAA,KAAA;AACA,OAJA;AAKA;AAlEA;AApDA,CAAA","sourcesContent":["<template>\r\n  <div class=\"image-list\">\r\n    <div class=\"action-head\">\r\n      <el-radio-group\r\n        v-model=\"collect\"\r\n        size=\"mini\"\r\n        @change=\"loadImages(1)\"\r\n      >\r\n        <el-radio-button\r\n          :label=\"false\"\r\n        >全部</el-radio-button>\r\n        <el-radio-button\r\n          :label=\"true\"\r\n        >收藏</el-radio-button>\r\n      </el-radio-group>\r\n      <el-button\r\n        v-if=\"isShowAdd\"\r\n        size=\"mini\"\r\n        type=\"success\"\r\n        @click=\"dialogUploadVisible = true\"\r\n      >上传素材</el-button>\r\n    </div>\r\n    <!-- 素材列表 -->\r\n    <el-row :gutter=\"10\">\r\n      <el-col\r\n        :xs=\"12\"\r\n        :sm=\"6\"\r\n        :md=\"6\"\r\n        :lg=\"4\"\r\n        v-for=\"(img, index) in images\"\r\n        :key=\"index\"\r\n        class=\"image-item\"\r\n        @click.native=\"selected = index\"\r\n      >\r\n        <el-image\r\n          style=\"height: 100px\"\r\n          :src=\"img.url\"\r\n          fit=\"cover\"\r\n        ></el-image>\r\n        <div\r\n          class=\"selected\"\r\n          v-if=\"isShowSelected && selected === index\"\r\n        ></div>\r\n        <div v-if=\"isShowAction\" class=\"image-action\">\r\n          <!--\r\n            class 样式绑定\r\n             {\r\n                CSS类名: 布尔值\r\n             }\r\n             true：作用类名\r\n             false：不作用类名\r\n           -->\r\n          <el-button\r\n            type=\"warning\"\r\n            :icon=\"img.is_collected ? 'el-icon-star-on' : 'el-icon-star-off'\"\r\n            circle\r\n            size=\"small\"\r\n            @click=\"onCollect(img)\"\r\n            :loading=\"img.loading\"\r\n          ></el-button>\r\n          <el-button\r\n            size=\"small\"\r\n            type=\"danger\"\r\n            icon=\"el-icon-delete-solid\"\r\n            circle\r\n            :loading=\"img.loading\"\r\n            @click=\"onDelete(img)\"\r\n          ></el-button>\r\n          <!-- <i\r\n            :class=\"{\r\n              'el-icon-star-on': img.is_collected,\r\n              'el-icon-star-off': !img.is_collected\r\n            }\"\r\n            @click=\"onCollect(img)\"\r\n          ></i> -->\r\n          <!-- <i class=\"el-icon-delete-solid\"></i> -->\r\n          <!-- <el-button size=\"mini\" icon=\"el-icon-delete-solid\" circle></el-button> -->\r\n        </div>\r\n      </el-col>\r\n    </el-row>\r\n    <!-- /素材列表 -->\r\n\r\n    <!-- 数据分页 -->\r\n    <!--\r\n      分页数据改变以后，页码不会变化\r\n      它需要单独处理高亮的页码\r\n     -->\r\n    <el-pagination\r\n      background\r\n      layout=\"prev, pager, next\"\r\n      :total=\"totalCount\"\r\n      :page-size=\"pageSize\"\r\n      :current-page.sync=\"page\"\r\n      @current-change=\"onPageChange\"\r\n    >\r\n    </el-pagination>\r\n    <!-- /数据分页 -->\r\n\r\n    <el-dialog\r\n      title=\"上传素材\"\r\n      :visible.sync=\"dialogUploadVisible\"\r\n      :append-to-body=\"true\"\r\n    >\r\n      <!--\r\n        upload 组件本身就支持请求提交上传操作，说白了你使用它不用自己去发请求，它会自己发。\r\n        请求方法：默认就是 POST\r\n        请求路径：action，必须写完整路径\r\n        请求头：headers\r\n       -->\r\n      <el-upload\r\n        class=\"upload-demo\"\r\n        drag\r\n        action=\"http://ttapi.research.itcast.cn/mp/v1_0/user/images\"\r\n        :headers=\"uploadHeaders\"\r\n        name=\"image\"\r\n        multiple\r\n        :show-file-list=\"false\"\r\n        :on-success=\"onUploadSuccess\"\r\n      >\r\n        <i class=\"el-icon-upload\"></i>\r\n        <div class=\"el-upload__text\">将文件拖到此处，或<em>点击上传</em></div>\r\n        <div class=\"el-upload__tip\" slot=\"tip\">只能上传jpg/png文件，且不超过500kb</div>\r\n      </el-upload>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport {\r\n  getImages,\r\n  collectImage,\r\n  deleteImage\r\n} from '@/api/image'\r\n\r\nexport default {\r\n  name: 'ImageList',\r\n  components: {},\r\n  // 使用对象的方式定义 prop，更严谨，功能更丰富，强烈建议在项目中使用\r\n  // 参考文档：https://cn.vuejs.org/v2/guide/components-props.html#Prop-%E9%AA%8C%E8%AF%81\r\n  props: {\r\n    foo: {\r\n      type: Number,\r\n      // required: true,\r\n      default: 123\r\n    },\r\n    // 是否显示添加素材\r\n    isShowAdd: {\r\n      type: Boolean, // 布尔值\r\n      default: true // 默认值\r\n    },\r\n\r\n    // 是否显示图片下方的操作（收藏和删除）\r\n    isShowAction: {\r\n      type: Boolean,\r\n      default: true\r\n    },\r\n\r\n    isShowSelected: {\r\n      type: Boolean,\r\n      default: false\r\n    }\r\n  },\r\n  // 使用数组声明 prop，不建议，不够严谨，而且功能也不够强大，仅适合 demo 演示\r\n  // props: ['dsadsadsa'],\r\n  data () {\r\n    const user = JSON.parse(window.localStorage.getItem('user'))\r\n    return {\r\n      collect: false, // 默认查询全部素材列表\r\n      images: [], // 图片素材列表\r\n      dialogUploadVisible: false,\r\n      uploadHeaders: {\r\n        Authorization: `Bearer ${user.token}`\r\n      },\r\n      totalCount: 0, // 总数据条数\r\n      pageSize: 20, // 每页大小\r\n      page: 1, // 当前页码\r\n      selected: null // 选中的索引\r\n    }\r\n  },\r\n  computed: {},\r\n  watch: {},\r\n  created () {\r\n    // 页面初始化加载第 1 页数据\r\n    this.loadImages(1)\r\n  },\r\n  mounted () {},\r\n  methods: {\r\n    loadImages (page = 1) {\r\n      // 重置高亮页码，防止数据和页码不对应\r\n      this.page = page\r\n      getImages({\r\n        collect: this.collect,\r\n        page,\r\n        per_page: this.pageSize\r\n      }).then(res => {\r\n        const results = res.data.data.results\r\n        results.forEach(img => {\r\n          // img 对象本来没有 loading 数据\r\n          // 我们这里收到的往里面添加该数据是用来控制每个收藏按钮的 loading 状态\r\n          img.loading = false\r\n        })\r\n        this.images = results\r\n        this.totalCount = res.data.data.total_count\r\n      })\r\n    },\r\n\r\n    // onCollectChange () {\r\n    //   this.loadImages(1)\r\n    // },\r\n\r\n    onUploadSuccess () {\r\n      // 关闭对话框\r\n      this.dialogUploadVisible = false\r\n\r\n      // 更新素材列表\r\n      this.loadImages(this.page)\r\n\r\n      this.$message({\r\n        type: 'success',\r\n        message: '上传成功'\r\n      })\r\n    },\r\n\r\n    onPageChange (page) {\r\n      this.loadImages(page)\r\n    },\r\n\r\n    onCollect (img) {\r\n      // 展示 loading\r\n      img.loading = true\r\n      collectImage(img.id, !img.is_collected).then(res => {\r\n        // 更新视图状态\r\n        img.is_collected = !img.is_collected\r\n        // 关闭 loading\r\n        img.loading = false\r\n      })\r\n      // if (img.is_collected) {\r\n      //   // 已收藏，取消收藏\r\n      //   collectImage(img.id, false)\r\n      // } else {\r\n      //   // 没有收藏，添加收藏\r\n      //   collectImage(img.id, true)\r\n      // }\r\n    },\r\n\r\n    onDelete (img) {\r\n      img.loading = true\r\n      deleteImage(img.id).then(res => {\r\n        // 重新加载数据列表\r\n        this.loadImages(this.page)\r\n        img.loading = false\r\n      })\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped lang=\"less\">\r\n.action-head {\r\n  padding-bottom: 20px;\r\n  display: flex;\r\n  justify-content: space-between;\r\n}\r\n\r\n.image-item {\r\n  position: relative;\r\n}\r\n\r\n.image-action {\r\n  font-size: 25px;\r\n  display: flex;\r\n  justify-content: space-evenly;\r\n  align-items: center;\r\n  color: #fff;\r\n  height: 40px;\r\n  background-color: rgba(204, 204, 204, .5);\r\n  position: absolute;\r\n  bottom: 4px;\r\n  left: 5px;\r\n  right: 5px;\r\n}\r\n\r\n.selected {\r\n  background: url(./selected.png) no-repeat;\r\n  background-size: cover;\r\n  position: absolute;\r\n  left: 0;\r\n  right: 0;\r\n  bottom: 0;\r\n  top: 0;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n}\r\n</style>\r\n"],"sourceRoot":"src/views/image/components"}]}